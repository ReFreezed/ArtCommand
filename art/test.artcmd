# Parsing tests.
setFoo value"a\'b\"c\nw\\e" ; setFoo+5 ; setFoo'd
setFoo (1 --[[)]] + (false and ")))\n"..[[)\]] or 0) - --[=[((]=] 1)

round +round ; round round True  ; round roundTrue  ; round round(true )
round -round ; round round False ; round roundFalse ; round round(false)

func TestBlobs X Y Size
	set Col -1

	func TestBlobColumn R G B
		setx Col (Col+1)
		color R G B 1   ; circle (X+(Col+.5)*Size) (Y+(0+.5)*Size) (Size/2)
		color R G B .75 ; circle (X+(Col+.5)*Size) (Y+(1+.5)*Size) (Size/2)
		color R G B .50 ; circle (X+(Col+.5)*Size) (Y+(2+.5)*Size) (Size/2)
		color R G B .25 ; circle (X+(Col+.5)*Size) (Y+(3+.5)*Size) (Size/2)
	end

	TestBlobColumn 1 1 1
	TestBlobColumn 0 0 0
	TestBlobColumn 1 0 0
end



# Settings.
canvas 500 aa4
backdrop0 .3 0 .5
# backdrop (40/255) (40/255) (40/255)
fill.4 .4 .4 .5
# zoom 2

# Draw stuff.
color 1 1 1 .1
font 62  # Big boy!
text 490 -5 ax1 wrap550 align"right" "TEST TEST TEST TEST

color 0 0 0
circle 50 50 10

# Transform.
move 50 50

push
	rotate 20deg
	color 1 1 1
	rect 0 0 10 10 ax.5 ay.5

	set X 16
	circle -X 0 3
pop

# Masks.
makemask
	rect w20 h20
	rect w30 h50 y35
	circle 50 50 10

	font 24
	text text"Hello, world!" x12

	TestBlobs 1 65 4
	TestBlobs 1 90 4

	grad 1 1 1 1  0 0 0 1 ; rect 22 (40+0*14) 18 10
	grad 1 1 1 1  1 1 1 0 ; rect 22 (40+1*14) 18 10
	grad 0 0 0 1  0 0 0 0 ; rect 22 (40+2*14) 18 10

mask
	color 1 50% 1
	rect w1000 h1000 ax.5 ay.5
	TestBlobs 1 1 4
mask False

TestBlobs -13 1 4

# Line shapes.
color 1 1 0
circle "line" r24

# Reset transform.
origin
color 1 1 .89
circle r20

# Functions.
func DrawCircle X Y
	func DrawCircle X Y #inner
		circle X Y 10
	end
	DrawCircle (2*X) Y #inner
end

set "RG" .7
color RG RG 1
set  Tens "foo"
setx Tens (2*15)
DrawCircle y150 x80
DrawCircle(50+25) (200 - Tens)

# Loops.
color .5 0 0 .5
for 1 7 2
	rect (200+I*10) 150 10 50
end

# Blocks.
color 0 0 0
set X 0
do
	set X 100
end
circle "line" thick4 X 250 10

# Gradients.
grad 0 1 1 1  0 0 1 1               ; rect (320+0*40) 90 30 60
grad 0 1 1 1  0 0 1 1  45deg scale3 ; rect (320+1*40) 90 30 60
grad 0 1 1 1  0 0 1 1  -75deg       ; rect (320+2*40) 90 30 60 "line" thick4

grad 0 1 1 1  0 0 1 1               ; circle (335+0*40) 175 15
grad 0 1 1 1  0 0 1 1  45deg scale3 ; circle (335+1*40) 175 15
grad 0 1 1 1  0 0 1 1  -75deg       ; circle (335+2*40) 175 15 "line" thick4

# State.
color 0 0 1
rect 20 (300+0*15) 30 10
push
grad 1 0 0 1  0 1 0 1
rect 20 (300+1*15) 30 10
pop
rect 20 (300+2*15) 30 10
